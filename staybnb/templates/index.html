{% extends "base.html" %}
{% block content %}
<h2 class="section-title">Annonces</h2>

<div class="row g-4">
  {% for l in listings %}
    <div class="col-12 col-sm-6 col-lg-4">
      <a class="stay-card" href="{{ url_for('listing_detail', listing_id=l.id) }}">
        <div class="stay-image">
          {% if l.photos and l.photos[0] %}
            <img src="{{ url_for('uploads', filename=l.photos[0].filename) }}" alt="{{ l.title }}">
          {% else %}
            <img src="https://picsum.photos/seed/{{ l.id }}/800/600" alt="placeholder">
          {% endif %}
          <span class="price-badge">{{ l.price_per_night|int }}â‚¬ <span class="muted">/ nuit</span></span>
        </div>
        <div class="stay-body">
          <div class="d-flex justify-content-between align-items-start">
            <div class="text-truncate me-2 fw-semibold">{{ l.city }}, {{ l.country }}</div>
            <div class="small text-muted"><i class="bi bi-people"></i> {{ l.max_guests }}</div>
          </div>
          <div class="text-truncate text-muted">{{ l.title }}</div>
          <div class="chips mt-2">
            <span class="chip">{{ l.bedrooms }} ch</span>
            <span class="chip">{{ l.bathrooms }} sdb</span>
          </div>
        </div>
      </a>
    </div>
  {% else %}
    <p>Aucune annonce pour le moment.</p>
  {% endfor %}
</div>
{% endblock %}
